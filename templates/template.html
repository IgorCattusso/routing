<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>Zendesk Routing</title>
        <link rel="icon" type="image/png" href="/static/img/favicon.png">
        <link rel="stylesheet" href="/static/css/app.css">
        <link rel="stylesheet" href="/static/css/reset.css">
    </head>
    <body>
        <div class="wrapper">
            <div class="nav-bar scrollable">
                <ul class="accordion-menu">
                    {% if kwargs['authenticated'] %}
                        <label for="userId"></label>
                        <input id="userId" type="text" value="{{ kwargs['user_id'] }}" style="display: none">
                        <li>
                            <a href="/change-status">
                                <div class="dropdown-link">
                                    {% if kwargs['routing_status'] == 1 %}
                                        <img src="/static/svg/status-online.svg" alt="Status" class="nav-bar-status-img">
                                        {% else %}
                                        <img src="/static/svg/status-away.svg" alt="Status" class="nav-bar-status-img">
                                    {% endif %}

                                    {% if kwargs['routing_status'] == 1 %}
                                        <div><span class="dropdown-link-text" id="userStatus">Online</span></div>
                                    {% else %}
                                        <div><span class="dropdown-link-text" id="userStatus">Ausente</span></div>
                                    {% endif %}
                                </div>
                            </a>
                        </li>
                    {% endif %}

                    <li onclick="window.location.href='/'">
                        <div class="no-dropdown-link">
                            <div><img src="/static/svg/home.svg" alt="Home" class="menu-img"></div>
                            <div><span class="no-dropdown-link-text">Home</span></div>
                        </div>
                    </li>
                    <li onclick="window.location.href='/routes'">
                        <div class="no-dropdown-link">
                            <div><img src="/static/svg/routes.svg" alt="Rotas" class="menu-img"></div>
                            <div><span class="no-dropdown-link-text">Rotas</span></div>
                        </div>
                    </li>
                    <li onclick="window.location.href='/users'">
                        <div class="dropdown-link">
                            <div><img src="/static/svg/user.svg" alt="Usuários" class="menu-img"></div>
                            <div><span class="dropdown-link-text">Usuários</span></div>
                        </div>
                    </li>
                    <li onclick="window.location.href='/routing-settings'">
                        <div class="dropdown-link">
                            <div><img src="/static/svg/settings.svg" alt="Configurações" class="menu-img"></div>
                            <div><span class="dropdown-link-text">Configurações</span></div>
                        </div>
                    </li>
                    <li onclick="window.location.href='/logs'">
                        <div class="dropdown-link">
                            <div><img src="/static/svg/logs.svg" alt="Logs" class="menu-img"></div>
                            <div><span class="dropdown-link-text">Logs</span></div>
                        </div>
                    </li>
                    <li>
                        <div class="dropdown-link">
                            <svg fill="#ffffff" width="28px" height="28px" viewBox="0 0 14 14" role="img" focusable="false" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" stroke="#ffffff" stroke-width="0.00014">
                                <path d="m 6.5425,11.5475 -5.5425,0 5.5425,-6.6915 0,6.6915 z m 6.4575,0 -5.5425,0 c 0,-1.5315 1.2395,-2.7715 2.7715,-2.7715 1.5315,0 2.771,1.241 2.771,2.7715 z m -5.5425,-2.402 0,-6.693 5.5425,0 -5.5425,6.693 z M 6.5425,2.4525 C 6.5425,3.983 5.302,5.2245 3.771,5.2245 2.241,5.2245 1,3.984 1,2.4535 l 5.5425,0 0,-10e-4 z"></path>
                            </svg>
                            <div><span class="dropdown-link-text">Zendesk</span></div>
                        </div>
                        <ul class="submenu-Items">
                            <li>
                                <a href="/zendesk-ticket-forms" class="submenu-item-link-container">
                                    <img src="/static/svg/forms.svg" alt="Formulários" class="menu-img">
                                    <span class="submenu-item-text">Formulários</span>
                                </a>
                            </li>
                            <li>
                                <a href="/zendesk-locales" class="submenu-item-link-container">
                                    <img src="/static/svg/locales.svg" alt="Localidades" class="menu-img">
                                    <span class="submenu-item-text">Localidades</span>
                                </a>
                            </li>
                            <li>
                                <a href="/zendesk-schedules" class="submenu-item-link-container">
                                    <img src="/static/svg/clock.svg" alt="Programações" class="menu-img">
                                    <span class="submenu-item-text">Programações</span>
                                </a>
                            </li>
                            <li>
                                <a href="/zendesk-tags" class="submenu-item-link-container">
                                    <img src="/static/svg/tag.svg" alt="Tags" class="menu-img">
                                    <span class="submenu-item-text">Tags</span>
                                </a>
                            </li>
                            <li>
                                <a href="/zendesk-users" class="submenu-item-link-container">
                                    <img src="/static/svg/user-zendesk.svg" alt="Usuários" class="menu-img">
                                    <span class="submenu-item-text">Usuários</span>
                                </a>
                            </li>
                            <li>
                                <a href="/zendesk-groups" class="submenu-item-link-container">
                                    <img src="/static/svg/users.svg" alt="Grupos" class="menu-img">
                                    <span class="submenu-item-text">Grupos</span>
                                </a>
                            </li>
                        </ul>
                    </li>
                </ul>




                <div class="accordion-menu login-logout">
{#                    {% if kwargs['authenticated'] == True %}#}
{#                        <ul>#}
{#                            <li>#}
{#                                <a href="/logout">#}
{#                                    <div class="dropdown-link">#}
{#                                        <div><img src="/static/img/key.png" alt="Logout" class="menu-img"></div>#}
{#                                        <div><span class="dropdown-link-text">Logout</span></div>#}
{#                                    </div>#}
{#                                </a>#}
{#                            </li>#}
{#                        </ul>#}
{#                    {% else %}#}
{#                        <ul>#}
{#                            <li>#}
{#                                <a href="/login">#}
{#                                    <div class="dropdown-link">#}
{#                                        <div><img src="/static/img/key.png" alt="Login" class="menu-img"></div>#}
{#                                        <div><span class="dropdown-link-text">Login</span></div>#}
{#                                    </div>#}
{#                                </a>#}
{#                            </li>#}
{#                        </ul>#}
{#                    {% endif %}#}

                    {% if kwargs['authenticated'] == True %}

                        <div id="userOptionsContainer" class="user-options-container">
                            <ul class="user-options-list">
                                <li><a href="/profile/{{ kwargs['user_id'] }}" class="user-option">Perfil</a></li>
                                <li><a href="/logout" class="user-option">Sair</a></li>
                            </ul>
                        </div>

                        <div id="userInfoContainer" class="user-info-container">
                            <img id="userProfilePicture" src="{{ profile_picture }}" alt="User Profile Pictures"/>
                            <span id="navBarUserName">{{ kwargs['user_name'] }}</span>
                        </div>

                    {% else %}
                        <ul>
                            <li>
                                <a href="/login">
                                    <div class="dropdown-link">
                                        <div><img src="/static/img/key.png" alt="Login" class="menu-img"></div>
                                        <div><span class="dropdown-link-text">Login</span></div>
                                    </div>
                                </a>
                            </li>
                        </ul>

                    {% endif %}

                </div>
            </div>
        
            {% if kwargs['authenticated'] %}

                <svg id="notificationBell" fill="#a6a6a6" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="-2.4 -2.4 28.80 28.80" xml:space="preserve" width="256px" height="256px" stroke="#a6a6a6" stroke-width="0.00024000000000000003">
                    <g stroke-width="0"></g>
                    <g stroke-linecap="round" stroke-linejoin="round" stroke="#CCCCCC" stroke-width="0.048"></g>
                    <g>
                        <style type="text/css"> .st0{fill:none;}</style>
                        <g>
                            <path d="M12,2c-0.8,0-1.5,0.7-1.5,1.5v0.7C7.3,4.9,5,7.6,5,11v4.5l-2,2.3V19h18v-1.2l-2-2.3V11c0-3.4-2.3-6.1-5.5-6.8V3.5 C13.5,2.7,12.8,2,12,2z M10,20c0,1.1,0.9,2,2,2c1.1,0,2-0.9,2-2H10z"></path>
                        </g>
                    </g>
                </svg>

                <svg id="newNotificationBellIcon" viewBox="0 0 36 36" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" fill="#000000">
                    <g stroke-width="0"></g>
                    <g stroke-linecap="round" stroke-linejoin="round"></g>
                    <g><circle fill="#5e78ff" cx="18" cy="18" r="18"></circle></g>
                </svg>

                {% if kwargs['unread_notifications_count'] < 10 %}
                    <span id="newNotificationCounter" class="notification-counter">{{ kwargs['unread_notifications_count'] }}</span>
                {% endif %}
                {% if kwargs['unread_notifications_count'] >= 10 %}
                    <span id="newNotificationCounterMoreThanTen" class="notification-counter">{{ kwargs['unread_notifications_count'] }}</span>
                {% endif %}


                <div id="notificationPanelWrapper" class="notification-panel-wrapper">
                    <div class="notifications-panel-header-container">
                        <span class="notifications-panel-title">Notificações</span>
                        <span id="readAllNotifications" class="panel-actions" onclick="flagAllNotificationsAsRead({{ kwargs['user_id'] }})" onauxclick="flagAllNotificationsAsRead({{ kwargs['user_id'] }})">Marcar todas como lida</span>
                    </div>
                    <div id="notificationsPanelContainer" class="notifications-panel-container scrollable">
                        {% if not kwargs['user_notifications'] %}
                            <div class="no-notifications-container">
                                <div class="no-notification-icons-wrapper">
                                    <svg class="no-notification-icon" fill="#a6a6a6" width="185px" height="185px" viewBox="-2 -2 24.00 24.00" xmlns="http://www.w3.org/2000/svg" stroke="#a6a6a6" stroke-width="0.0002" transform="rotate(-45)matrix(1, 0, 0, 1, 0, 0)">
                                        <g stroke-width="0"></g>
                                        <g stroke-linecap="round" stroke-linejoin="round" stroke="#000000" stroke-width="0.12"></g>
                                        <g><path d="M4 8a6 6 0 0 1 4.03-5.67 2 2 0 1 1 3.95 0A6 6 0 0 1 16 8v6l3 2v1H1v-1l3-2V8zm8 10a2 2 0 1 1-4 0h4z"></path></g>
                                    </svg>
                                </div>
                                <span class="notification-text" id="no-notifications-text">Você não tem notificações!</span>
                            </div>
                        {% endif %}
                        {% for notification in kwargs['user_notifications'] %}
                            {% if notification[2] %}
                                <a id="notification-{{ notification[0] }}" href="{{ notification[2] }}" target="_blank" class="notification-link" onclick="flagNotificationAsRead({{ notification[0] }})" onauxclick="flagNotificationAsRead({{ notification[0] }})">
                                    <div class="notification-container">
                                        <span id="notificationText-{{ notification[0] }}" class="notification-text">{{ notification[1] }}</span>
                                        <div class="notification-icons-wrapper">
                                            <svg id="notificationOpenLinkIcon-{{ notification[0] }}" class="open-link-svg" fill="#000000" viewBox="0 0 50 50" xmlns="http://www.w3.org/2000/svg" stroke="#000000" stroke-width="0.25">
                                                <g stroke-width="0"></g>
                                                <g stroke-linecap="round" stroke-linejoin="round"></g>
                                                <g>
                                                    <path d="M38.288 10.297l1.414 1.415-14.99 14.99-1.414-1.414z"></path>
                                                    <path d="M40 20h-2v-8h-8v-2h10z"></path>
                                                    <path d="M35 38H15c-1.7 0-3-1.3-3-3V15c0-1.7 1.3-3 3-3h11v2H15c-.6 0-1 .4-1 1v20c0 .6.4 1 1 1h20c.6 0 1-.4 1-1V24h2v11c0 1.7-1.3 3-3 3z"></path>
                                                </g>
                                            </svg>

                                            {% if not notification[3] %}
                                                <svg id="notificationUnreadIcon-{{ notification[0] }}" class="unread-notification-icon" viewBox="0 0 36 36" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" preserveAspectRatio="xMidYMid meet" fill="#000000">
                                                    <g stroke-width="0"></g>
                                                    <g stroke-linecap="round" stroke-linejoin="round"></g>
                                                    <g>
                                                        <circle fill="#5e78ff" cx="18" cy="18" r="18"></circle>
                                                    </g>
                                                </svg>
                                            {% endif %}


                                        </div>
                                    </div>
                                </a>

                            {% else %}

                                <div class="notification-container" onclick="flagNotificationAsRead({{ notification[0] }});" onauxclick="flagNotificationAsRead({{ notification[0] }});">
                                    <span class="notification-text" id="notification-{{ notification[0] }}" onclick="flagNotificationAsRead({{ notification[0] }})" onauxclick="flagNotificationAsRead({{ notification[0] }})">{{ notification[1] }}</span>
                                    <div class="notification-icons-wrapper">
                                        {% if not notification[3] %}
                                            <svg id="notificationUnreadIcon-{{ notification[0] }}" class="unread-notification-icon" viewBox="0 0 36 36" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" preserveAspectRatio="xMidYMid meet" fill="#000000">
                                                <g stroke-width="0"></g>
                                                <g stroke-linecap="round" stroke-linejoin="round"></g>
                                                <g><circle fill="#5e78ff" cx="18" cy="18" r="18"></circle></g>
                                            </svg>
                                        {% endif %}
                                    </div>
                                </div>


                            {% endif %}



                        {% endfor %}
                    </div>
                </div>

            {% endif %}

            {% block conteudo %}{% endblock %}

            <script src='https://code.jquery.com/jquery-2.2.4.min.js'></script>
            <script src="/static/js/app.js"></script>
            <script src="/static/js/notification.js"></script>

        </div>
    </body>
</html>
